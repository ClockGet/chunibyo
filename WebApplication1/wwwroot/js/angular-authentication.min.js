(function(){"use strict";function n(n,t){function f(i){return n.post("api/users/login",t(i)).then(r,u("Error login user"))}function e(i){return n.post("/api/users/create",t(i)).then(r,u("Error creating user"))}function o(){return n.get("/api/users/logout").then(r,u("Error logout user"))}function s(t){return n.get("/api/users/reset/"+t).then(r,u("Error reset user"))}function r(n){return n.data}function u(n){return function(){return{success:!1,message:n}}}var i={};return i.Login=f,i.Create=e,i.Logout=o,i.Reset=s,i}function t(n,t,i,r,u,f){function s(n,t,e){r(function(){var r=null,s=f.hex_md5(t);u.Login({username:n,password:s}).then(function(t){if(t!==null&&t.success){angular.extend(i.user,{userName:n,passWord:s});i.user.isLogin=!0;i.user.userName=n;var u=new Date;u.setDate(u.getDate()+7);o("user",i.user,{expires:u});r={success:!0}}else r={success:!1,message:t.message};e(r)})},1e3)}function h(n,t,e){r(function(){var r=null,s=f.hex_md5(t);u.Create({userName:n,passWord:s}).then(function(t){if(t!==null&&t.success){angular.extend(i.user,{userName:n,passWord:s});i.user.isLogin=!0;i.user.userName=n;var u=new Date;u.setDate(u.getDate()+7);o("user",i.user,{expires:u});r={success:!0}}else r={success:!1,message:t.message};e(r)})},1e3)}function c(n){r(function(){var t=null;u.Logout().then(function(r){r!==null&&r.success?(i.user={isLogin:!1},a("user"),t={success:!0}):t={success:!1,message:r.message};n(t)})},1e3)}function l(n,t){r(function(){var i=null;u.Reset(n).then(function(n){i=n!==null&&n.success?{success:!0}:{success:!1,message:n.message};t(i)})},1e3)}function o(n,i,r){t.putObject(n,i,r)}function a(n){t.remove(n)}var e={};return e.Login=s,e.Register=h,e.Logout=c,e.Reset=l,e}angular.module("user.service",[]).factory("UserService",n);n.$inject=["$http","$httpParamSerializerJQLike"];angular.module("authentication.service",["user.service","encrypt","ngCookies"]).factory("AuthenticationService",t);t.$inject=["$http","$cookies","$rootScope","$timeout","UserService","Md5"]})();